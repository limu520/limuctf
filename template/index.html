<!DOCTYPE HTML>
<html>

<head>
    <title>Limuctf</title>
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="apple-touch-fullscreen" content="yes" />
    <meta name="format-detection" content="email=no" />
    <meta name="wap-font-scale" content="no" />
    <meta name="viewport" content="user-scalable=no, width=device-width" />
    <meta content="telephone=no" name="format-detection" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link href="https://at.alicdn.com/t/font_1551254_rxrrzgz2kjc.css" rel="stylesheet" type="text/css" />
    <link href="/static/css/ax.css" rel="stylesheet" type="text/css">
    <!--地址不定时更新，引用时请注意-->
    <link href="/static/css/ax-response.css" rel="stylesheet" type="text/css">
</head>
<style>
    .card {
        width: 250px;
        height: 250px;
        background-color: #1168eb;
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
        text-align: center;
        float: left;
        margin-right: 20px;
        margin-top: 20px;
    }

    .header {
        margin-top: 80px;
        text-align: center;
        color: white;
        font-size: 20px;
    }
</style>

<body>
    <header class="ax-header">
        <div class="ax-row">
            <div class="ax-col"><a href="/" class="ax-logo"><img
                        src="https://limublog.oss-cn-hangzhou.aliyuncs.com/ctf/photo_2022-01-13_15-39-16.jpg" /></a></div>
            <div class="ax-nav">
                <div class="ax-item ax-grade"><a href="/" class="ax-text">首页</a><span class="ax-line"></span></div>

                <div class="ax-item ax-grade">
                    <a href="###" class="ax-text">CTF赛题<i class="ax-iconfont ax-icon-down"></i>
                        <span class="ax-line"></span>
                        <ul class="ax-outer">
                            <li><a href="/topic?type=basic">Basic</a></li>
                            <li><a href="/topic?type=pwn">Pwn</a></li>
                            <li><a href="/topic?type=web">Web</a></li>
                            <li><a href="/topic?type=crypto">Crypto</a></li>
                            <li><a href="/topic?type=reverse">Reverse</a></li>
                            <li><a href="/topic?type=misc">Misc</a></li>
                        </ul>
                </div>

                <div class="ax-item ax-grade"><a href="/artical" class="ax-text">官方公告</a><span class="ax-line"></span>
                </div>
                <div class="ax-item ax-grade"><a href="/scoreboard" class="ax-text">排行榜</a><span class="ax-line"></span>
                </div>
                {{.person_data}}

            </div>
        </div>
    </header>
    <div class="ax-space-header"></div>

    <!-- 内加载网页 -->
    <div class="ax-flex-col" style="height: 90%;text-align: center; margin-left: 11%;margin-right: 11%;">
        <div class="ax-flex-block">
            <!-- <iframe id="iframesrc" src="{{.iframeurl}}" width="100%" height="100%" frameborder="0" allowfullscreen
                sandbox></iframe> -->
            {{.topic_data}}
        </div>
    </div>



    <!-- 登录弹窗 -->
    <div class="ax-window" data-mask="true" id="form01">
        <form action="">
            <div class="ax-window-overlay"></div>
            <div class="ax-window-contain">
                <a href="###" class="ax-window-close"><i class="ax-iconfont ax-icon-close"></i></a>
                <div class="ax-window-title">用户登录</div>
                <div class="ax-break-line"></div>
                <div class="ax-window-content">
                    <div class="ax-padding ax-outer-tel">

                        <div class="ax-form-group">
                            <div class="ax-flex-row">
                                <div class="ax-form-con">
                                    <div class="ax-form-input">
                                        <div class="ax-flex-row ax-form-origin">
                                            <div class="ax-flex-block ax-title">用户名</div>
                                            <!-- <span class="ax-color-ignore">还可以输入<i class="ax-color-warning">8</i>个文字</span> -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="ax-flex-row">
                                <div class="ax-form-con">
                                    <div class="ax-form-input"><input name="username" id="username" placeholder="输入账号"
                                            type="text">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="ax-form-group">
                            <div class="ax-flex-row">
                                <div class="ax-form-con">
                                    <div class="ax-form-input">
                                        <div class="ax-flex-row ax-form-origin">
                                            <div class="ax-flex-block ax-title">密码</div>
                                            <!-- <span class="ax-color-ignore">忘记了密码？</span> -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="ax-flex-row">
                                <div class="ax-form-con">
                                    <div class="ax-form-input">
                                        <input name="password" id="password" placeholder="输入密码" type="password">
                                    </div>
                                    <div class="ax-valid ax-color-danger">
                                        <!-- <span class="ax-iconfont ax-icon-close-o-fill"></span>填写错误！</div> -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="ax-break-line"></div>
                    <div class="ax-padding ax-window-operate">
                        <div class="ax-row">
                            <div class="ax-btns">
                                <a href="###" class="ax-btn ax-text ax-ignore ax-window-close">取消</a>
                                <a href="###" class="ax-btn ax-primary" type="submit" id="sign1">确定</a>
                            </div>
                        </div>
                    </div>

                </div>
        </form>
    </div>


    <!-- 注册弹窗 -->
    <div class="ax-window" data-mask="true" id="form02">
        <form>
            <div class="ax-window-overlay"></div>
            <div class="ax-window-contain">
                <a href="###" class="ax-window-close"><i class="ax-iconfont ax-icon-close"></i></a>
                <div class="ax-window-title">用户注册</div>
                <div class="ax-break-line"></div>
                <div class="ax-window-content">
                    <div class="ax-padding ax-outer-tel">

                        <div class="ax-form-group">
                            <div class="ax-flex-row">
                                <div class="ax-form-con">
                                    <div class="ax-form-input">
                                        <div class="ax-flex-row ax-form-origin">
                                            <div class="ax-flex-block ax-title">用户名</div>
                                            <!-- <span class="ax-color-ignore">还可以输入<i class="ax-color-warning">8</i>个文字</span> -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="ax-flex-row">
                                <div class="ax-form-con">
                                    <div class="ax-form-input"><input name="usernames" id="usernames" placeholder="输入账号"
                                            type="text">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="ax-form-group">
                            <div class="ax-flex-row">
                                <div class="ax-form-con">
                                    <div class="ax-form-input">
                                        <div class="ax-flex-row ax-form-origin">
                                            <div class="ax-flex-block ax-title">密码</div>
                                            <!-- <span class="ax-color-ignore">忘记了密码？</span> -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="ax-flex-row">
                                <div class="ax-form-con">
                                    <div class="ax-form-input">
                                        <input name="passwords" id="passwords" placeholder="输入密码" type="password">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="ax-form-group">
                            <div class="ax-flex-row">
                                <div class="ax-form-con">
                                    <div class="ax-form-input">
                                        <div class="ax-flex-row ax-form-origin">
                                            <div class="ax-flex-block ax-title">确认密码</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="ax-flex-row">
                                <div class="ax-form-con">
                                    <div class="ax-form-input">
                                        <input name="conpassword" id="conform" placeholder="重新输入密码" type="password">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="ax-form-group">
                            <div class="ax-flex-row">
                                <div class="ax-form-con">
                                    <div class="ax-form-input">
                                        <div class="ax-flex-row ax-form-origin">
                                            <div class="ax-flex-block ax-title">QQ</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="ax-flex-row">
                                <div class="ax-form-con">
                                    <div class="ax-form-input">
                                        <input name="qqnum" id="qqnum" placeholder="输入QQ" type="text">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="ax-form-group">
                            <div class="ax-flex-row">
                                <div class="ax-form-con">
                                    <div class="ax-form-input">
                                        <div class="ax-flex-row ax-form-origin">
                                            <div class="ax-flex-block ax-title">邮箱</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="ax-flex-row">
                                <div class="ax-form-con">
                                    <div class="ax-form-input">
                                        <input name="email" id="email" placeholder="输入邮箱" type="text">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="ax-break-line"></div>
                    <div class="ax-padding ax-window-operate">
                        <div class="ax-row">
                            <div class="ax-btns">
                                <a href="###" class="ax-btn ax-text ax-ignore ax-window-close">取消</a>
                                <a href="###" class="ax-btn ax-primary" type="submit" id="register1">确定</a>
                            </div>
                        </div>
                    </div>

                </div>
        </form>
    </div>

    <!-- 题目弹窗 -->
    <div class="ax-window" id="form03">
        <div class="ax-window-overlay"></div>
        <div class="ax-window-contain">
            <a href="###" class="ax-window-close"><i class="ax-iconfont ax-icon-close"></i></a>
            <div class="ax-window-content">
                <div class="ax-break-xl"></div>
                <div class="ax-padding">
                    <div style="text-align: center; font-size: 40px;">
                        <br>
                        <b id="topic1">Hello World</b>
                        <br><br>
                    </div>

                    <div style="text-align: center; font-size: 20px;">
                        <p id="topic2"></p>
                    </div>

                    <br><br>
                    <div style="font-size: 15px;">
                        <div style="margin-left: 20px;" id="topic3">
                        </div>
                    </div>
                    <br><br><br>
                    <div style="text-align: center;">
                        <a href="" style="font-size: 20px;" id="topic_addr">题目地址:</a>
                        <br><br>
                        <a class="ax-btn ax-success" id="startcon" name="">启动容器</a>
                    </div>
                    <br>
                    <div class="ax-form-group">
                        <div class="ax-flex-row">
                            <div class="ax-form-con">
                                <div class="ax-form-input">
                                    <input placeholder="请输入Flag" type="text" id="getflag">
                                </div>
                            </div>
                            &nbsp;&nbsp;&nbsp;<button type="button" class="ax-btn ax-ripple ax-primary"
                                id="submitflag">提交Flag</button>
                        </div>
                    </div>
                    <br><br>
                </div>
            </div>
        </div>
    </div>



    <script src="/static/js/jquery-1.10.2.min.js" type="text/javascript"></script>
    <script src="/static/js/ax.js" type="text/javascript"></script>
    <script>
        //登录
        $("#signform").click(function () {
            $("#form01").addClass("ax-window-show");
        });

        $("#sign1").click(function () {
            var username = document.getElementById('username').value
            var password = document.getElementById('password').value
            console.log(username);
            console.log(password);
            var httpRequest = new XMLHttpRequest();
            httpRequest.open('POST', '/signin', true);
            httpRequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded");//注：post方式必须设置请求头
            httpRequest.send("username=" + username + "&password=" + password);
            /**
             * 获取数据后的处理程序
             */
            httpRequest.onreadystatechange = function () {//请求后的回调接口
                if (httpRequest.readyState == 4 && httpRequest.status == 200) {//验证请求是否发送成功
                    var text = httpRequest.responseText;//获取到服务端返回的数据
                    if (text != "success") {
                        alert(text)
                    }
                    else {
                        window.location.replace("/");
                    }
                }
            }
            return false;
        });

        //注册
        $("#registerform").click(function () {
            $("#form02").addClass("ax-window-show");
        });
        $("#register1").click(function () {
            var username = document.getElementById('usernames').value
            var password = document.getElementById('passwords').value
            var conform = document.getElementById('conform').value
            var qqnum = document.getElementById('qqnum').value
            var email = document.getElementById('email').value
            var httpRequest = new XMLHttpRequest();
            httpRequest.open('POST', '/register', true);
            httpRequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded");//注：post方式必须设置请求头
            httpRequest.send("username=" + username + "&password=" + password + "&conform=" + conform + "&qqnum=" + qqnum + "&email=" + email);
            /**
             * 获取数据后的处理程序
             */
            httpRequest.onreadystatechange = function () {//请求后的回调接口
                if (httpRequest.readyState == 4 && httpRequest.status == 200) {//验证请求是否发送成功
                    var text = httpRequest.responseText;//获取到服务端返回的数据
                    if (text != "success") {
                        alert(text)
                    }
                    else {
                        window.location.replace("/");
                    }
                }
            }
            return false;
        });

        //点击弹出题目
        $("[id=topic]").click((event) => {
            var name = $(event.target).attr('name');
            $("#topic1").html("<b>" + name + "</b>"); //题目名字    
            $.post("/getcontent", { name: name }, function (data, status) {
                $("#topic2").html(data.content);
                $("#topic3").html(data.upload);
                $("#startcon").attr('name', name);
                $("#topic_addr").html("题目地址： " + data.status);

            });
            $("#form03").addClass("ax-window-show");
        });
        //启动回调容器
        $("#startcon").click((event) => {
            var name = $(event.target).attr('name');
            console.log(name);
            $.post("/game", { name: name }, function (data, status) {
                $("topic_addr").attr('href', data.topic_url);
                $("#topic_addr").html("题目地址： " + data.topic_url);
            });
        });


        //获取并且提交flag
        $("#submitflag").click((event) => {
            var flag = document.getElementById("getflag").value
            console.log(flag)
            $.post("/flag", {flag:flag},function (data,status) {
                alert(data.data)
            });
        });
    </script>
</body>


</html>
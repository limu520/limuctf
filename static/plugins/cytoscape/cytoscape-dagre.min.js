(function webpackUniversalModuleDefinition(root,factory){if(typeof exports==="object"&&typeof module==="object")module.exports=factory(require("dagre"));else if(typeof define==="function"&&define.amd)define(["dagre"],factory);else if(typeof exports==="object")exports["cytoscapeDagre"]=factory(require("dagre"));else root["cytoscapeDagre"]=factory(root["dagre"])})(this,function(__WEBPACK_EXTERNAL_MODULE_4__){return function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.i=function(value){return value};__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{configurable:false,enumerable:true,get:getter})}};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=3)}([function(module,exports,__webpack_require__){"use strict";var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};var isFunction=function isFunction(o){return typeof o==="function"};var defaults=__webpack_require__(2);var assign=__webpack_require__(1);var dagre=__webpack_require__(4);function DagreLayout(options){this.options=assign({},defaults,options)}DagreLayout.prototype.run=function(){var options=this.options;var layout=this;var cy=options.cy;var eles=options.eles;var getVal=function getVal(ele,val){return isFunction(val)?val.apply(ele,[ele]):val};var bb=options.boundingBox||{x1:0,y1:0,w:cy.width(),h:cy.height()};if(bb.x2===undefined){bb.x2=bb.x1+bb.w}if(bb.w===undefined){bb.w=bb.x2-bb.x1}if(bb.y2===undefined){bb.y2=bb.y1+bb.h}if(bb.h===undefined){bb.h=bb.y2-bb.y1}var g=new dagre.graphlib.Graph({multigraph:true,compound:true});var gObj={};var setGObj=function setGObj(name,val){if(val!=null){gObj[name]=val}};setGObj("nodesep",options.nodeSep);setGObj("edgesep",options.edgeSep);setGObj("ranksep",options.rankSep);setGObj("rankdir",options.rankDir);setGObj("ranker",options.ranker);g.setGraph(gObj);g.setDefaultEdgeLabel(function(){return{}});g.setDefaultNodeLabel(function(){return{}});var nodes=eles.nodes();for(var i=0;i<nodes.length;i++){var node=nodes[i];var nbb=node.layoutDimensions(options);g.setNode(node.id(),{width:nbb.w,height:nbb.h,name:node.id()})}for(var _i=0;_i<nodes.length;_i++){var _node=nodes[_i];if(_node.isChild()){g.setParent(_node.id(),_node.parent().id())}}var edges=eles.edges().stdFilter(function(edge){return!edge.source().isParent()&&!edge.target().isParent()});for(var _i2=0;_i2<edges.length;_i2++){var edge=edges[_i2];g.setEdge(edge.source().id(),edge.target().id(),{minlen:getVal(edge,options.minLen),weight:getVal(edge,options.edgeWeight),name:edge.id()},edge.id())}dagre.layout(g);var gNodeIds=g.nodes();for(var _i3=0;_i3<gNodeIds.length;_i3++){var id=gNodeIds[_i3];var n=g.node(id);cy.getElementById(id).scratch().dagre=n}var dagreBB=void 0;if(options.boundingBox){dagreBB={x1:Infinity,x2:-Infinity,y1:Infinity,y2:-Infinity};nodes.forEach(function(node){var dModel=node.scratch().dagre;dagreBB.x1=Math.min(dagreBB.x1,dModel.x);dagreBB.x2=Math.max(dagreBB.x2,dModel.x);dagreBB.y1=Math.min(dagreBB.y1,dModel.y);dagreBB.y2=Math.max(dagreBB.y2,dModel.y)});dagreBB.w=dagreBB.x2-dagreBB.x1;dagreBB.h=dagreBB.y2-dagreBB.y1}else{dagreBB=bb}var constrainPos=function constrainPos(p){if(options.boundingBox){var xPct=dagreBB.w===0?0:(p.x-dagreBB.x1)/dagreBB.w;var yPct=dagreBB.h===0?0:(p.y-dagreBB.y1)/dagreBB.h;return{x:bb.x1+xPct*bb.w,y:bb.y1+yPct*bb.h}}else{return p}};nodes.layoutPositions(layout,options,function(ele){ele=(typeof ele==="undefined"?"undefined":_typeof(ele))==="object"?ele:this;var dModel=ele.scratch().dagre;return constrainPos({x:dModel.x,y:dModel.y})});return this};module.exports=DagreLayout},function(module,exports,__webpack_require__){"use strict";module.exports=Object.assign!=null?Object.assign.bind(Object):function(tgt){for(var _len=arguments.length,srcs=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){srcs[_key-1]=arguments[_key]}srcs.forEach(function(src){Object.keys(src).forEach(function(k){return tgt[k]=src[k]})});return tgt}},function(module,exports,__webpack_require__){"use strict";var defaults={nodeSep:undefined,edgeSep:undefined,rankSep:undefined,rankDir:undefined,ranker:undefined,minLen:function minLen(edge){return 1},edgeWeight:function edgeWeight(edge){return 1},fit:true,padding:30,spacingFactor:undefined,nodeDimensionsIncludeLabels:false,animate:false,animateFilter:function animateFilter(node,i){return true},animationDuration:500,animationEasing:undefined,boundingBox:undefined,transform:function transform(node,pos){return pos},ready:function ready(){},stop:function stop(){}};module.exports=defaults},function(module,exports,__webpack_require__){"use strict";var impl=__webpack_require__(0);var register=function register(cytoscape){if(!cytoscape){return}cytoscape("layout","dagre",impl)};if(typeof cytoscape!=="undefined"){register(cytoscape)}module.exports=register},function(module,exports){module.exports=__WEBPACK_EXTERNAL_MODULE_4__}])});